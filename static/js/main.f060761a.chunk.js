(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},76:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),s=n(5),i=n.n(s),o=n(4),l=n(9),u=n(14),j=(n(64),n(24)),d=n.n(j),b=n(27),O=(n(66),n(1)),h=function(e){return e.href?Object(O.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(O.jsx)(u.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(O.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})},x=(n(76),function(e){return Object(O.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),p=(n(47),n(29)),f=n.n(p),m=function(e){return Object(O.jsxs)("li",{className:"user-item",children:[Object(O.jsx)(x,{className:"user-item__content",children:Object(O.jsxs)(u.b,{to:"/updateuser",children:[Object(O.jsxs)("div",{className:"user-item__info",children:[Object(O.jsx)(f.a,{}),Object(O.jsx)("h2",{children:e.name}),Object(O.jsx)("h3",{children:e.email}),Object(O.jsx)("h3",{children:e.id})]}),Object(O.jsx)("br",{})]})}),Object(O.jsx)(x,{children:Object(O.jsxs)("div",{className:"user-item__actions",children:[Object(O.jsx)(h,{children:"EDIT"}),Object(O.jsx)(h,{danger:!0,children:"DELETE"})]})})]})},v=(n(80),function(e){return 0===e.items.length?Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(x,{children:Object(O.jsx)("h2",{children:"No users found."})})}):Object(O.jsx)("ul",{className:"users-list",children:e.items.map((function(e){return Object(O.jsx)(m,{id:e.userId,name:e.name,email:e.email},e.userId)}))})}),g=n(15),N=n(125),C=(n(81),function(e){return i.a.createPortal(Object(O.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}),y=(n(82),function(e){var t=Object(O.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(O.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(O.jsx)("h2",{children:e.header})}),Object(O.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(O.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(O.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return i.a.createPortal(t,document.getElementById("modal-hook"))}),k=function(e){return Object(O.jsxs)(r.a.Fragment,{children:[e.show&&Object(O.jsx)(C,{onClick:e.onCancel}),Object(O.jsx)(N.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:"modal",children:Object(O.jsx)(y,Object(g.a)({},e))})]})},w=function(e){return Object(O.jsx)(k,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(O.jsx)(h,{onClick:e.onClear,children:"Okay"}),children:Object(O.jsx)("p",{children:e.error})})},I=(n(83),function(e){return Object(O.jsx)("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay"),children:Object(O.jsx)("div",{className:"lds-dual-ring"})})}),E=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],u=i[1],j=Object(a.useState)(),h=Object(o.a)(j,2),x=h[0],p=h[1];Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.prev=1,e.next=4,fetch("http://localhost:5000/auth/users");case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.message);case 10:p(n.users),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),u(e.t0.message);case 16:c(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);return Object(O.jsxs)(r.a.Fragment,{children:[Object(O.jsx)(w,{error:l,onClear:function(){u(null)}}),n&&Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(I,{})}),!n&&x&&Object(O.jsx)(v,{items:x})]})},S=function(){return Object(O.jsx)("h2",{children:" Centers "})},T=function(){return Object(O.jsx)("h2",{children:" Add Center"})},_=(n(84),function(e){return Object(O.jsx)("header",{className:"main-header",children:e.children})}),V=(n(85),n(86),Object(a.createContext)({isLoggedIn:!1,userId:null,token:null,login:function(){},logout:function(){}})),P=n(127),A=n(123),D=n(126),L=n(122),U=Object(L.a)({logoutButton:{fontSize:"16px",background:"transparent",border:"none",letterSpacing:"1px"}}),R=function(){var e=U(),t=r.a.useState(null),n=Object(o.a)(t,2),c=n[0],s=n[1],i=Object(a.useContext)(V),l=function(){s(null)};return Object(O.jsxs)("div",{children:[Object(O.jsx)(P.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},children:Object(O.jsx)(f.a,{})}),Object(O.jsxs)(A.a,{id:"simple-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:l,children:[Object(O.jsx)(D.a,{onClick:l,component:u.b,to:"/userprofile",children:"User Profile"}),Object(O.jsx)(D.a,{onClick:l,children:Object(O.jsx)("button",{className:e.logoutButton,onClick:i.logout,children:"LOGOUT"})})]})]})},G=Object(L.a)({authButton:{fontSize:"16px",background:"transparent",border:"none",letterSpacing:"1px"}}),B=function(e){var t=Object(a.useContext)(V),n=G();return Object(O.jsxs)("ul",{className:"nav-links",children:[Object(O.jsx)("li",{children:Object(O.jsx)(u.c,{to:"/",exact:!0,children:"CENTERS"})}),t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(u.c,{to:"/addcenter",children:"ADD CENTER"})}),t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(u.c,{to:"/users",children:"USERS"})}),!t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(u.c,{to:"/auth",children:Object(O.jsx)(f.a,{className:n.authButton})})}),t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(R,{})})]})},H=(n(88),function(e){var t=Object(O.jsx)(N.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return i.a.createPortal(t,document.getElementById("drawer-hook"))}),M=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],s=n[1],i=function(){s(!1)};return Object(O.jsxs)(r.a.Fragment,{children:[c&&Object(O.jsx)(C,{onClick:i}),Object(O.jsx)(H,{show:c,onClick:i,children:Object(O.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(O.jsx)(B,{})})}),Object(O.jsxs)(_,{children:[Object(O.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){s(!0)},children:[Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{})]}),Object(O.jsx)("h1",{className:"main-navigation__title",children:Object(O.jsx)(u.b,{to:"/",children:"QUARANTINE CENTERS"})}),Object(O.jsx)("nav",{className:"main-navigation__header-nav",children:Object(O.jsx)(B,{})})]})]})},J=n(50),z="REQUIRE",F="MINLENGTH",q="MAXLENGTH",Q="EMAIL",W="PHONE",X="PASSWORD",$=function(){return{type:z}},K=function(e){return{type:X,val:e}},Y=function(e,t){var n,c=!0,a=Object(J.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;r.type===z&&(c=c&&e.trim().length>0),r.type===F&&(c=c&&e.trim().length>=r.val),r.type===q&&(c=c&&e.trim().length<=r.val),"MIN"===r.type&&(c=c&&+e>=r.val),"MAX"===r.type&&(c=c&&+e<=r.val),r.type===Q&&(c=c&&/^\S+@\S+\.\S+$/.test(e)),r.type===W&&(c=c&&/^\d{10}$/.test(e)),r.type===X&&(c=c&&e===r.val)}}catch(s){a.e(s)}finally{a.f()}return c},Z=(n(89),function(e,t){switch(t.type){case"CHANGE":return Object(g.a)(Object(g.a)({},e),{},{value:t.val,isValid:Y(t.val,t.validators)});case"TOUCH":return Object(g.a)(Object(g.a)({},e),{},{isTouched:!0});default:return e}}),ee=function(e){var t=Object(a.useReducer)(Z,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=e.id,i=e.onInput,l=c.value,u=c.isValid;Object(a.useEffect)((function(){i(s,l,u)}),[s,l,u,i]);var j=function(t){r({type:"CHANGE",val:t.target.value,validators:e.validators})},d=function(){r({type:"TOUCH"})},b="input"===e.element?Object(O.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:j,onBlur:d,value:c.value}):Object(O.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:j,onBlur:d,value:c.value});return Object(O.jsxs)("div",{className:"form-control ".concat(!c.isValid&&c.isTouched&&"form-control--invalid"),children:[Object(O.jsx)("label",{htmlFor:e.id,children:e.label}),b,!c.isValid&&c.isTouched&&Object(O.jsx)("p",{children:e.errorText})]})},te=n(10),ne=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var c in e.inputs)e.inputs[c]&&(n=c===t.inputId?n&&t.isValid:n&&e.inputs[c].isValid);return Object(g.a)(Object(g.a)({},e),{},{inputs:Object(g.a)(Object(g.a)({},e.inputs),{},Object(te.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},ce=(n(90),function(){var e,t=Object(a.useContext)(V),n=Object(a.useState)(!0),c=Object(o.a)(n,2),s=c[0],i=c[1],u=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(),s=Object(o.a)(r,2),i=s[0],l=s[1],u=Object(a.useRef)([]),j=Object(a.useCallback)(function(){var e=Object(b.a)(d.a.mark((function e(t){var n,a,r,s,i,o,j=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.length>1&&void 0!==j[1]?j[1]:"GET",a=j.length>2&&void 0!==j[2]?j[2]:null,r=j.length>3&&void 0!==j[3]?j[3]:{},c(!0),s=new AbortController,u.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:a,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(o=e.sent,u.current=u.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(o.message);case 16:return c(!1),e.abrupt("return",o);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),c(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(a.useEffect)((function(){return function(){u.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:i,sendRequest:j,clearError:function(){l(null)}}}(),j=u.isLoading,p=u.error,f=u.sendRequest,m=u.clearError,v=Object(l.g)(),N=function(e,t){var n=Object(a.useReducer)(ne,{inputs:e,isValid:t}),c=Object(o.a)(n,2),r=c[0],s=c[1];return[r,Object(a.useCallback)((function(e,t,n){s({type:"INPUT_CHANGE",value:t,isValid:n,inputId:e})}),[]),Object(a.useCallback)((function(e,t){s({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),C=Object(o.a)(N,3),y=C[0],k=C[1],E=C[2],S=function(){var e=Object(b.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!s){e.next=13;break}return e.prev=2,e.next=5,f("http://localhost:5000/auth/login","POST",JSON.stringify({email:y.inputs.email.value,password:y.inputs.password.value}),{"Content-Type":"application/json"});case 5:c=e.sent,t.login(c.userId,c.token),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,f("http://localhost:5000/auth/signup","POST",JSON.stringify({name:y.inputs.name.value,email:y.inputs.email.value,password:y.inputs.password.value,address:y.inputs.address.value,contact_no:y.inputs.contact_no.value}),{"Content-Type":"application/json"});case 16:e.sent,v.push("/signup"),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),console.log(e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,9],[13,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(r.a.Fragment,{children:[Object(O.jsx)(w,{error:p,onClear:m}),Object(O.jsxs)(x,{className:"authentication",children:[j&&Object(O.jsx)(I,{asOverlay:!0}),Object(O.jsx)("h2",{children:s?"Login Required":"Sign Up"}),Object(O.jsx)("hr",{}),Object(O.jsxs)("form",{onSubmit:S,children:[!s&&Object(O.jsx)(ee,{element:"input",id:"name",type:"text",label:"Name",validators:[$()],errorText:"Please enter a name.",onInput:k}),Object(O.jsx)(ee,{element:"input",id:"email",type:"email",label:"E-Mail",validators:[{type:Q}],errorText:"Please enter a valid email address.",onInput:k}),Object(O.jsx)(ee,{element:"input",id:"password",type:"password",label:"Password",validators:[(e=6,{type:F,val:e})],errorText:"Please enter a valid password, at least 6 characters.",onInput:k}),!s&&Object(O.jsx)(ee,{element:"input",id:"confirm_password",type:"password",label:"Confirm Password",validators:[K(y.inputs.password.value)],errorText:"Please confirm password.",onInput:k}),!s&&Object(O.jsx)(ee,{element:"input",id:"address",type:"text",label:"Address",validators:[$()],errorText:"Please enter an address.",onInput:k}),!s&&Object(O.jsx)(ee,{element:"input",id:"contact_no",type:"text",label:"Contact no",validators:[{type:W}],errorText:"Please enter a valid contact no.",onInput:k}),Object(O.jsx)(h,{type:"submit",disabled:!y.isValid,children:s?"LOGIN":"SIGNUP"})]}),Object(O.jsxs)(h,{inverse:!0,onClick:function(){s?E(Object(g.a)(Object(g.a)({},y.inputs),{},{name:{value:"",isValid:!1},address:{value:"",isValid:!1},contact_no:{value:"",isValid:!1},confirm_password:{value:"",isValid:!1}}),!1):E(Object(g.a)(Object(g.a)({},y.inputs),{},{name:void 0,address:void 0,contact_no:void 0,confirm_password:void 0}),y.inputs.email.isValid&&y.inputs.password.isValid),i((function(e){return!e}))},children:["SWITCH TO ",s?"SIGNUP":"LOGIN"]})]})]})}),ae=function(){return Object(O.jsx)("h2",{children:" UpdateUser "})},re=function(){return Object(O.jsx)("h2",{children:"user profile"})},se=function(){return Object(O.jsx)("h2",{children:" UpdateCenter page "})},ie=function(){var e,t=Object(a.useState)(!1),n=Object(o.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(),j=Object(o.a)(i,2),d=j[0],b=j[1],h=Object(a.useState)(!1),x=Object(o.a)(h,2),p=x[0],f=x[1],m=Object(a.useCallback)((function(e,t,n){s(t),f(e);var c=n||new Date((new Date).getTime()+36e5);b(c),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:c.toISOString()}))}),[]),v=Object(a.useCallback)((function(){s(null),b(null),f(null),localStorage.removeItem("userData")}),[]);return Object(a.useEffect)((function(){if(r&&d){var e=d.getTime()-(new Date).getTime();c=setTimeout(v,e)}else clearTimeout(c)}),[r,v,d]),Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&m(e.userId,e.token,new Date(e.expiration))}),[m]),e=r?Object(O.jsxs)(l.d,{children:[Object(O.jsx)(l.b,{path:"/",exact:!0,children:Object(O.jsx)(S,{})}),Object(O.jsx)(l.b,{path:"/addcenter",exact:!0,children:Object(O.jsx)(T,{})}),Object(O.jsx)(l.b,{path:"/updatecenter",exact:!0,children:Object(O.jsx)(se,{})}),Object(O.jsx)(l.b,{path:"/users",exact:!0,children:Object(O.jsx)(E,{})}),Object(O.jsx)(l.b,{path:"/updateuser",exact:!0,children:Object(O.jsx)(ae,{})}),Object(O.jsx)(l.b,{path:"/userprofile",exact:!0,children:Object(O.jsx)(re,{})}),Object(O.jsx)(l.b,{path:"/users/:userId",children:Object(O.jsx)(ae,{})}),Object(O.jsx)(l.a,{to:"/"})]}):Object(O.jsxs)(l.d,{children:[Object(O.jsx)(l.b,{path:"/",exact:!0,children:Object(O.jsx)(S,{})}),Object(O.jsx)(l.b,{path:"/auth",children:Object(O.jsx)(ce,{})}),Object(O.jsx)(l.a,{to:"/auth"})]}),Object(O.jsx)(V.Provider,{value:{isLoggedIn:!!r,token:r,userId:p,login:m,logout:v},children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)(M,{}),Object(O.jsx)("main",{children:e})]})})};n(91);i.a.render(Object(O.jsx)(ie,{}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.f060761a.chunk.js.map